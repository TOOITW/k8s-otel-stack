apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-prometheus-config
data:
  prometheus.yml: |
    global:
      scrape_interval: 15s
      evaluation_interval: 15s

    scrape_configs:
      # Prometheus 自身 metrics
      - job_name: 'prometheus'
        static_configs:
          - targets: ['localhost:9090']

      # OTel Collector metrics
      - job_name: 'otel-collector'
        static_configs:
          - targets: ['otel-collector:8888']

      # Tempo metrics
      - job_name: 'tempo'
        static_configs:
          - targets: ['tempo:3200']

      # Loki metrics
      - job_name: 'loki'
        static_configs:
          - targets: ['loki:3100']

      # Windows 主機 metrics
      - job_name: 'windows'
        static_configs:
          - targets: ['host.docker.internal:9182']
